<script type="text/worker">
    //javascript
    //calculate luck crit fail
    on("change:Luck_P_Max", function () {
        getAttrs(["Luck_P_Max"], function (values) {
            setAttrs({
                Luck_Fail: Number(values.Luck_P_Max) + 95
            });
        });
    });

    //calculate total weight
    on("change:Head_Lb change:Left_Arm_Lb change:Left_Leg_Lb change:Body_Lb change:Right_Arm_Lb change:Right_Leg_Lb", function () {
        getAttrs(["Head_Lb", "Left_Arm_Lb", "Left_Leg_Lb", "Body_Lb", "Right_Arm_Lb", "Right_Leg_Lb"], function (values) {
            setAttrs({
                Total_Lb: Number(values.Head_Lb) + Number(values.Left_Arm_Lb) + Number(values.Left_Leg_Lb)
                + Number(values.Body_Lb) + Number(values.Right_Arm_Lb) + Number(values.Right_Leg_Lb)
            });
        });
    });

    //calculate HP and Stamina Points
    on("change:endurance", function () {
        getAttrs(["endurance"], function (values) {
            setAttrs({
                HP_Max: Math.ceil(values.endurance / 2)

            });
            setAttrs({
                Stam_P_Max: Math.floor(values.endurance / 10)
            });
        });
    });

    //calculate MP
    on("change:intelligence", function () {
        getAttrs(["intelligence"], function (values) {
            setAttrs({
                MP_Max: values.intelligence
            });
        });
    });

    //calculate Wound Threshold
    on("change:endurance change:strength change:willpower", function () {
        getAttrs(["endurance", "strength", "willpower"], function (values) {
            setAttrs({
                Wound_Thresh: Math.floor(values.endurance / 10) + Math.floor(values.strength / 10) + Math.floor(values.willpower / 10)
            });
        });
    });

    //calculate Speed
    on("change:strength change:agility", function () {
        getAttrs(["agility", "strength"], function (values) {
            setAttrs({
                Speed: Math.floor(values.strength / 10) + (2 * (Math.floor(values.agility / 10)))
            });
        });
    });

    //calculate Carry Rating
    on("change:strength change:endurance", function () {
        getAttrs(["strength", "endurance"], function (values) {
            setAttrs({
                Carry_Rating: (6 * (Math.floor(values.strength / 10))) + (3 * (Math.floor(values.endurance / 10)))
            });
        });
    });

    //calculate Initiative Rating and Action Points
    on("change:agility change:intelligence change:perception", function () {
        getAttrs(["agility", "intelligence", "perception"], function (values) {
            setAttrs({
                Init_Rating: Math.floor(values.agility / 10) + Math.floor(values.intelligence / 10) + Math.floor(values.perception / 10)
            });
            setAttrs({
                Action_P_Max: Math.floor(values.agility / 10) + Math.floor(values.intelligence / 10) + Math.floor(values.perception / 10)
            });
        });
    });

    //calculate Luck Points
    on("change:luck", function () {
        getAttrs(["luck"], function (values) {
            setAttrs({
                Luck_P_Max: Math.floor(values.luck / 10)
            });
        });
    });

    //Bonus and Base TN calcs
    //Base TN for Acrobatics
    on("change:Acrobatics_Rank", function () {
        getAttrs(["Acrobatics_Rank", "strength", "agility"], function (values) {
            setAttrs({
                Acrobatics_Bonus: values.Acrobatics_Rank
            });
            setAttrs({
                Acrobatics_Base_TN: "str:" + (Number(values.Acrobatics_Rank) + Number(values.strength)) + "/ag:"
                + (Number(values.Acrobatics_Rank) + Number(values.agility))
            });
        });
    });

    //Base TN for Alchemy
    on("change:Alchemy_Rank", function () {
        getAttrs(["Alchemy_Rank", "intelligence"], function (values) {
            setAttrs({
                Alchemy_Bonus: values.Alchemy_Rank
            });
            setAttrs({
                Alchemy_Base_TN: "int:" + (Number(values.Alchemy_Rank) + Number(values.intelligence))
            });
        });
    });

    //Base TN for Alteration
    on("change:Alteration_Rank", function () {
        getAttrs(["Alteration_Rank", "willpower"], function (values) {
            setAttrs({
                Alteration_Bonus: values.Alteration_Rank
            });
            setAttrs({
                Alteration_Base_TN: "wp:" + (Number(values.Alteration_Rank) + Number(values.willpower))
            });
        });
    });

    //Base TN for Athletics
    on("change:Athletics_Rank", function () {
        getAttrs(["Athletics_Rank", "strength", "endurance"], function (values) {
            setAttrs({
                Athletics_Bonus: values.Athletics_Rank
            });
            setAttrs({
                Athletics_Base_TN: "str:" + (Number(values.Athletics_Rank) + Number(values.strength)) + "/end:"
                + (Number(values.Athletics_Rank) + Number(values.endurance))
            });
        });
    });

    //Base TN for Command
    on("change:Command_Rank", function () {
        getAttrs(["Command_Rank", "strength", "intelligence", "precision"], function (values) {
            setAttrs({
                Command_Bonus: values.Command_Rank
            });
            setAttrs({
                Command_Base_TN: "str:" + (Number(values.Command_Rank) + Number(values.strength)) + "/int:"
                + (Number(values.Command_Rank) + Number(values.intelligence)) + "/prs:"
                + (Number(values.Command_Rank) + Number(values.precision))
            });
        });
    });

    //Base TN for Commerce
    on("change:Commerce_Rank", function () {
        getAttrs(["Commerce_Rank", "intelligence", "precision"], function (values) {
            setAttrs({
                Commerce_Bonus: values.Commerce_Rank
            });
            setAttrs({
                Commerce_Base_TN: "int:" + (Number(values.Commerce_Rank) + Number(values.intelligence)) + "/prs:"
                + (Number(values.Commerce_Rank) + Number(values.precision))
            });
        });
    });

    //Base TN for Conjuration
    on("change:Conjuration_Rank", function () {
        getAttrs(["Conjuration_Rank", "willpower"], function (values) {
            setAttrs({
                Conjuration_Bonus: values.Conjuration_Rank
            });
            setAttrs({
                Conjuration_Base_TN: "wp:" + (Number(values.Conjuration_Rank) + Number(values.willpower))
            });
        });
    });

    //Base TN for Deceive
    on("change:Deceive_Rank", function () {
        getAttrs(["Deceive_Rank", "intelligence", "precision"], function (values) {
            setAttrs({
                Deceive_Bonus: values.Deceive_Rank
            });
            setAttrs({
                Deceive_Base_TN: "int:" + (Number(values.Deceive_Rank) + Number(values.intelligence)) + "/prs:"
                + (Number(values.Deceive_Rank) + Number(values.precision))
            });
        });
    });

    //Base TN for Destruction
    on("change:Destruction_Rank", function () {
        getAttrs(["Destruction_Rank", "willpower"], function (values) {
            setAttrs({
                Destruction_Bonus: values.Destruction_Rank
            });
            setAttrs({
                Destruction_Base_TN: "wp:" + (Number(values.Destruction_Rank) + Number(values.willpower))
            });
        });
    });

    //Base TN for Enchant
    on("change:Enchant_Rank", function () {
        getAttrs(["Enchant_Rank", "intelligence"], function (values) {
            setAttrs({
                Enchant_Bonus: values.Enchant_Rank
            });
            setAttrs({
                Enchant_Base_TN: "int:" + (Number(values.Enchant_Rank) + Number(values.intelligence))
            });
        });
    });

    //Base TN for Evade
    on("change:Evade_Rank", function () {
        getAttrs(["Evade_Rank", "agility"], function (values) {
            setAttrs({
                Evade_Bonus: values.Evade_Rank
            });
            setAttrs({
                Evade_Base_TN: "ag:" + (Number(values.Evade_Rank) + Number(values.agility))
            });
        });
    });

    //Base TN for Illusion
    on("change:Illusion_Rank", function () {
        getAttrs(["Illusion_Rank", "willpower"], function (values) {
            setAttrs({
                Illusion_Bonus: values.Illusion_Rank
            });
            setAttrs({
                Illusion_Base_TN: "wp:" + (Number(values.Illusion_Rank) + Number(values.willpower))
            });
        });
    });

    //Base TN for Investigate
    on("change:Investigate_Rank", function () {
        getAttrs(["Investigate_Rank", "intelligence", "perception"], function (values) {
            setAttrs({
                Investigate_Bonus: values.Investigate_Rank
            });
            setAttrs({
                Investigate_Base_TN: "int:" + (Number(values.Investigate_Rank) + Number(values.intelligence)) + "/prc:"
                + (Number(values.Investigate_Rank) + Number(values.perception))
            });
        });
    });

    //Base TN for Logic
    on("change:Logic_Rank", function () {
        getAttrs(["Logic_Rank", "intelligence", "perception"], function (values) {
            setAttrs({
                Logic_Bonus: values.Logic_Rank
            });
            setAttrs({
                Logic_Base_TN: "int:" + (Number(values.Logic_Rank) + Number(values.intelligence)) + "/prc:"
                + (Number(values.Logic_Rank) + Number(values.perception))
            });
        });
    });

    //Base TN for Lore
    on("change:Lore_Rank", function () {
        getAttrs(["Lore_Rank", "intelligence"], function (values) {
            setAttrs({
                Lore_Bonus: values.Lore_Rank
            });
            setAttrs({
                Lore_Base_TN: "int:" + (Number(values.Lore_Rank) + Number(values.intelligence))
            });
        });
    });

    //Base TN for Mysticism
    on("change:Mysticism_Rank", function () {
        getAttrs(["Mysticism_Rank", "willpower"], function (values) {
            setAttrs({
                Mysticism_Bonus: values.Mysticism_Rank
            });
            setAttrs({
                Mysticism_Base_TN: "wp:" + (Number(values.Mysticism_Rank) + Number(values.willpower))
            });
        });
    });

    //Base TN for Navigate
    on("change:Navigate_Rank", function () {
        getAttrs(["Navigate_Rank", "intelligence", "perception"], function (values) {
            setAttrs({
                Navigate_Bonus: values.Navigate_Rank
            });
            setAttrs({
                Navigate_Base_TN: "int:" + (Number(values.Navigate_Rank) + Number(values.intelligence)) + "/prc:"
                + (Number(values.Navigate_Rank) + Number(values.perception))
            });
        });
    });

    //Base TN for Necromancy
    on("change:Necromancy_Rank", function () {
        getAttrs(["Necromancy_Rank", "intelligence"], function (values) {
            setAttrs({
                Necromancy_Bonus: values.Necromancy_Rank
            });
            setAttrs({
                Necromancy_Base_TN: "int:" + (Number(values.Necromancy_Rank) + Number(values.intelligence))
            });
        });
    });

    //Base TN for Observe
    on("change:Observe_Rank", function () {
        getAttrs(["Observe_Rank", "perception"], function (values) {
            setAttrs({
                Observe_Bonus: values.Observe_Rank
            });
            setAttrs({
                Observe_Base_TN: "prc:" + (Number(values.Observe_Rank) + Number(values.perception))
            });
        });
    });

    //Base TN for Persuade
    on("change:Persuade_Rank", function () {
        getAttrs(["Persuade_Rank", "strength", "precision"], function (values) {
            setAttrs({
                Persuade_Bonus: values.Persuade_Rank
            });
            setAttrs({
                Persuade_Base_TN: "str:" + (Number(values.Persuade_Rank) + Number(values.strength)) + "/prs:"
                + (Number(values.Persuade_Rank) + Number(values.precision))
            });
        });
    });

    //Base TN for Restoration
    on("change:Restoration_Rank", function () {
        getAttrs(["Restoration_Rank", "willpower"], function (values) {
            setAttrs({
                Restoration_Bonus: values.Restoration_Rank
            });
            setAttrs({
                Restoration_Base_TN: "wp:" + (Number(values.Restoration_Rank) + Number(values.willpower))
            });
        });
    });

    //Base TN for Ride
    on("change:Ride_Rank", function () {
        getAttrs(["Ride_Rank", "agility"], function (values) {
            setAttrs({
                Ride_Bonus: values.Ride_Rank
            });
            setAttrs({
                Ride_Base_TN: "ag:" + (Number(values.Ride_Rank) + Number(values.agility))
            });
        });
    });

    //Base TN for Shehai Shen She Ru
    on("change:Shehai_Shen_She_Ru_Rank", function () {
        getAttrs(["Shehai_Shen_She_Ru_Rank", "strength", "agility", "willpower"], function (values) {
            setAttrs({
                Shehai_Shen_She_Ru_Bonus: values.Shehai_Shen_She_Ru_Rank
            });
            setAttrs({
                Shehai_Shen_She_Ru_Base_TN: "str:" + (Number(values.Shehai_Shen_She_Ru_Rank) + Number(values.strength))
                + "/ag:" + (Number(values.Shehai_Shen_She_Ru_Rank) + Number(values.agility)) + "/wp:"
                + (Number(values.Shehai_Shen_She_Ru_Rank) + Number(values.willpower))
            });
        });
    });

    //Base TN for Stealth
    on("change:Stealth_Rank", function () {
        getAttrs(["Stealth_Rank", "agility", "perception"], function (values) {
            setAttrs({
                Stealth_Bonus: values.Stealth_Rank
            });
            setAttrs({
                Stealth_Base_TN: "ag:" + (Number(values.Stealth_Rank) + Number(values.agility)) + "/prc:"
                + (Number(values.Stealth_Rank) + Number(values.perception))
            });
        });
    });

    //Base TN for Subterfuge
    on("change:Subterfuge_Rank", function () {
        getAttrs(["Subterfuge_Rank", "agility", "intelligence"], function (values) {
            setAttrs({
                Subterfuge_Bonus: values.Subterfuge_Rank
            });
            setAttrs({
                Subterfuge_Base_TN: "ag:" + (Number(values.Subterfuge_Rank) + Number(values.agility)) + "/int:"
                + (Number(values.Subterfuge_Rank) + Number(values.intelligence))
            });
        });
    });

    //Base TN for Survival
    on("change:Survival_Rank", function () {
        getAttrs(["Survival_Rank", "intelligence", "perception"], function (values) {
            setAttrs({
                Survival_Bonus: values.Survival_Rank
            });
            setAttrs({
                Survival_Base_TN: "int:" + (Number(values.Survival_Rank) + Number(values.intelligence)) + "/prc:"
                + (Number(values.Survival_Rank) + Number(values.perception))
            });
        });
    });

    //Base TN for Th'uum
    on("change:Thuum_Rank", function () {
        getAttrs(["Thuum_Rank", "willpower"], function (values) {
            setAttrs({
                Thuum_Bonus: values.Thuum_Rank
            });
            setAttrs({
                Thuum_Base_TN: "wp:" + (Number(values.Thuum_Rank) + Number(values.willpower))
            });
        });
    });

    //Bonus for profession1
    on("change:Profession1_Rank", function () {
        getAttrs(["Profession1_Rank"], function (values) {
            setAttrs({
                Profession1_Bonus: values.Profession1_Rank
            });
        });
    });

    //Bonus for profession2
    on("change:profession2_Rank", function () {
        getAttrs(["profession2_Rank"], function (values) {
            setAttrs({
                profession2_Bonus: values.profession2_Rank
            });
        });
    });

    //Bonus for profession3
    on("change:profession3_Rank", function () {
        getAttrs(["profession3_Rank"], function (values) {
            setAttrs({
                profession3_Bonus: values.profession3_Rank
            });
        });
    });

</script>
<div class="sheet-characteristics">

    <div class="sheet-wrapper">
        <div class="sheet-h1"><h1> UESRPG Third Edition Character Sheet</h1></div>
        <div>
            <input type="radio" name="attr_tab" class="sheet-tab sheet-tab1" value="1" checked="checked"><span
                title="General">General</span>
            <input type="radio" name="attr_tab" class="sheet-tab sheet-tab2" value="2"><span
                title="Equipment">Equipment</span>
            <input type="radio" name="attr_tab" class="sheet-tab sheet-tab3" value="3"><span
                title="Abilities">Abilities</span>
            <input type="radio" name="attr_tab" class="sheet-tab sheet-tab4" value="4"><span title="Magic">Magic</span>
            <div class="sheet-tab-content sheet-tab1">
                <div class="sheet-2colrow">
                    <!-- left outer col -->
                    <div class="sheet-col">
                        <div class="sheet-row">
                            <div class="sheet-item"><label>Name</label></div>
                            <div class="sheet-item"><input class="sheet-item sheet-Name" name="attr_Name" type="text">
                            </div>
                        </div>
                        <!-- inner cols for char stats -->
                        <div class="sheet-2colrow">
                            <!-- Left Column -->
                            <div class="sheet-col">
                                <div class="sheet-row">
                                    <div class="sheet-item"><label>Experience</label></div>
                                    <div class="sheet-item"><input class="sheet-item sheet-XP" name="attr_XP"
                                                                   type="text"></div>
                                </div>
                                <div class="sheet-row">
                                    <div class="sheet-item"><label>Elite Advancement</label></div>
                                    <div class="sheet-item">
                                        <select name="attr_EliteAdvancement">
                                            <option value="None">None</option>
                                            <option value="Stormvoice">Stormvoice</option>
                                            <option value="Sword-singer">Sword-singer</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Right Column -->
                            <div class="sheet-col">
                                <div class="sheet-row">
                                    <div class="sheet-item"><label>Race</label></div>
                                    <div class="sheet-item">
                                        <select name="attr_Race">
                                            <option value="Altmer">Altmer</option>
                                            <option value="Argonian">Argonian</option>
                                            <option value="Bosmer">Bosmer</option>
                                            <option value="Breton">Breton</option>
                                            <option value="Colovian Imperial">Colovian Imperial</option>
                                            <option value="Dunmer">Dunmer</option>
                                            <option value="Khajiit">Khajiit</option>
                                            <option value="Nibenese Imperial">Nibenese Imperial</option>
                                            <option value="Nord">Nord</option>
                                            <option value="Orsimer">Orsimer</option>
                                            <option value="Redguard">Redguard</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="sheet-row">
                                    <div class="sheet-item"><label>Birthsign</label></div>
                                    <div class="sheet-item">
                                        <select name="attr_Birthsign">
                                            <option value="The Warrior">The Warrior</option>
                                            <option value="Star-Cursed Warrior">Star-Cursed Warrior</option>
                                            <option value="The Lady">The Lady</option>
                                            <option value="Star-Cursed Lady">Star-Cursed Lady</option>
                                            <option value="The Steed">The Steed</option>
                                            <option value="Star-Cursed Speed">Star-Cursed Lady</option>
                                            <option value="The Lord">The Lord</option>
                                            <option value="Star-Cursed Lord">Star-Cursed Lord</option>
                                            <option value="The Mage">The Mage</option>
                                            <option value="Star-Cursed Mage">Star-Cursed Mage</option>
                                            <option value="The Apprentice">The Apprentice</option>
                                            <option value="Star-Cursed Apprentice">Star-Cursed Apprentice</option>
                                            <option value="The Atronach">The Atronach</option>
                                            <option value="Star-Cursed Atronach">Star-Cursed Atronach</option>
                                            <option value="The Ritual">The Ritual</option>
                                            <option value="Star-Cursed Ritual">Star-Cursed Ritual</option>
                                            <option value="The Thief">The Thief</option>
                                            <option value="Star-Cursed Thief">Star-Cursed Thief</option>
                                            <option value="The Lover">The Lover</option>
                                            <option value="Star-Cursed Lover">Star-Cursed Lover</option>
                                            <option value="The Shadow">The Shadow</option>
                                            <option value="Star-Cursed Shadow">Star-Cursed Shadow</option>
                                            <option value="The Tower">The Tower</option>
                                            <option value="Star-Cursed Tower">Star-Cursed Tower</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- inner cols for char stats -->

                        <!-- grid for primary stats -->
                        <div class="sheet-item">
                            <h2>Characteristics</h2>
                            <div class="sheet-item sheet-label-grid">
                                <div class="sheet-item sheet-label-str">Str</div>
                                <div class="sheet-item sheet-label-end">End</div>
                                <div class="sheet-item sheet-label-ag">Ag</div>
                                <div class="sheet-item sheet-label-int">Int</div>
                                <div class="sheet-item sheet-label-wp">Wp</div>
                                <div class="sheet-item sheet-label-prc">Prc</div>
                                <div class="sheet-item sheet-label-prs">Prs</div>
                                <div class="sheet-item sheet-label-lck">Lck</div>
                            </div>
                            <div class="sheet-item sheet-stats-grid">
                                <input class="sheet-item sheet-stats-str" name="attr_strength" type="text">
                                <input class="sheet-item sheet-stats-end" name="attr_endurance" type="text">
                                <input class="sheet-item sheet-stats-ag" name="attr_agility" type="text">
                                <input class="sheet-item sheet-stats-int" name="attr_intelligence" type="text">
                                <input class="sheet-item sheet-stats-wp" name="attr_willpower" type="text">
                                <input class="sheet-item sheet-stats-prc" name="attr_perception" type="text">
                                <input class="sheet-item sheet-stats-prs" name="attr_precision" type="text">
                                <input class="sheet-item sheet-stats-lck" name="attr_luck" type="text">
                            </div>
                            <div class="sheet-item sheet-favored-grid">
                                <input class="sheet-item sheet-favored" name="attr_favored" type="radio"
                                       value='strength'>
                                <input class="sheet-item sheet-favored" name="attr_favored" type="radio"
                                       value='endurance'>
                                <input class="sheet-item sheet-favored" name="attr_favored" type="radio"
                                       value='agility'>
                                <input class="sheet-item sheet-favored" name="attr_favored" type="radio"
                                       value='intelligence'>
                                <input class="sheet-item sheet-favored" name="attr_favored" type="radio"
                                       value='willpower'>
                                <input class="sheet-item sheet-favored" name="attr_favored" type="radio"
                                       value='perception'>
                                <input class="sheet-item sheet-favored" name="attr_favored" type="radio"
                                       value='precision'>
                                <div class="sheet-item sheet-label-favored">Favored</div>
                            </div>
                        </div> <!-- grid for primary stats -->
                        <!-- attributes -->
                        <div class="sheet-item">
                            <h2>Attributes</h2>
                            <div class="sheet-2colrow sheet-attributes">
                                <span name="attr_Luck_Fail"></span>
                                <div class="sheet-col">
                                    <div class="sheet-row sheet-attributes-left">
                                        Wound Thresh. <input class="sheet-item sheet-Wound-Thresh sheet-big-attr"
                                                             name="attr_Wound_Thresh" type="text"><br>
                                        Speed <input class="sheet-item sheet-Speed sheet-big-attr" name="attr_Speed"
                                                     type="text"><br>
                                        <button type='roll'
                                                value='/roll 1d6 + @{Init_Rating} + ?{Modifier|0} &{tracker}'
                                                name='roll_InitCheck'></button><!--remove space
                                        -->Init. Rating <input
                                            class="sheet-item sheet-Init-Rating sheet-big-attr"
                                            name="attr_Init_Rating"
                                            type="text"><br>
                                        Carry Rating <input class="sheet-item sheet-Carry-Rating sheet-big-attr"
                                                            name="attr_Carry_Rating" type="text">
                                        Total Lb(s) <input class="sheet-item sheet-Total-Lb sheet-big-attr"
                                                           name="attr_Total_Lb" type="text">
                                    </div>

                                </div>
                                <div class="sheet-col">
                                    <div class="sheet-row sheet-attributes-right">
                                        Health Points <input class="sheet-item sheet-HP" value="0" name="attr_HP"
                                                             type="text"><input class="sheet-item sheet-HP-Max"
                                                                                name="attr_HP_Max"
                                                                                type="text"><br>
                                        Magicka Points <input class="sheet-item sheet-MP" value="0" name="attr_MP"
                                                              type="text"><input class="sheet-item sheet-MP-Max"
                                                                                 name="attr_MP_Max" type="text"><br>
                                        Stam Points <input class="sheet-item sheet-Stam-P" value="0" name="attr_Stam_P"
                                                           type="text"><input class="sheet-item sheet-Stam-P-Max"
                                                                              name="attr_Stam_P_Max"
                                                                              type="text"><br>
                                        Luck Points<input class="sheet-item sheet-Luck-P" value="0" name="attr_Luck_P"
                                                          type="text"><input class="sheet-item sheet-Luck-P-Max"
                                                                             name="attr_Luck_P_Max"
                                                                             type="text"><br>
                                        Action Points <input class="sheet-item sheet-Action-P" value="0"
                                                             name="attr_Action_P" type="text"><input
                                            class="sheet-item sheet-Action-P-Max"
                                            name="attr_Action_P_Max" type="text"><br>

                                    </div>
                                </div>
                            </div>
                        </div><!-- attributes -->

                        <!-- armor and wounds -->
                        <div class="sheet-item">
                            <h2>Armor & Wounds</h2>
                            <div class="sheet-3colrow sheet-AandW">
                                <div class="sheet-col sheet-left-AandW">
                                    <h3>Head(0)</h3><br>
                                    AR<input class="sheet-item sheet-Head-AR" name="attr_Head_AR" type="text"><br>
                                    Lb(s)<input class="sheet-item sheet-Head-Lb" name="attr_Head_Lb" type="text"><br>
                                    Type<input class="sheet-item sheet-Head-Type" name="attr_Head_Type" type="text"><br>
                                    <h3>Left Arm(8)</h3><br>
                                    AR<input class="sheet-item sheet-Left-Arm-AR" name="attr_Left_Arm_AR"
                                             type="text"><br>
                                    Lb(s)<input class="sheet-item sheet-Left-Arm-Lb" name="attr_Left_Arm_Lb"
                                                type="text"><br>
                                    Type<input class="sheet-item sheet-Left-Arm-Type" name="attr_Left_Arm_Type"
                                               type="text"><br>
                                    <h3>Left Leg(6)</h3><br>
                                    AR<input class="sheet-item sheet-Left-Leg-AR" name="attr_Left_Leg_AR"
                                             type="text"><br>
                                    Lb(s)<input class="sheet-item sheet-Left-Leg-Lb" name="attr_Left_Leg_Lb"
                                                type="text"><br>
                                    Type<input class="sheet-item sheet-Left-Leg-Type" name="attr_Left_Leg_Type"
                                               type="text"><br>
                                </div>
                                <div class="sheet-col sheet-center-AandW">
                                    <img src="https://i.imgur.com/qGUrcQT.png" alt="power"/>
                                </div>
                                <div class="sheet-col sheet-right-AandW">
                                    <h3>Body(1-5)</h3><br>
                                    <input class="sheet-item sheet-Body-AR" name="attr_Body_AR" type="text">AR<br>
                                    <input class="sheet-item sheet-Body-Lb" name="attr_Body_Lb" type="text">Lb(s)<br>
                                    <input class="sheet-item sheet-Body-Type" name="attr_Body_Type" type="text">Type<br>
                                    <h3>Right Arm(9)</h3><br>
                                    <input class="sheet-item sheet-Right-Arm-AR" name="attr_Right_Arm_AR" type="text">AR<br>
                                    <input class="sheet-item sheet-Right-Arm-Lb" name="attr_Right_Arm_Lb"
                                           type="text">Lb(s)<br>
                                    <input class="sheet-item sheet-Right-Arm-Type" name="attr_Right_Arm_Type"
                                           type="text">Type<br>
                                    <h3>Right Leg(7)</h3><br>
                                    <input class="sheet-item sheet-Right-Leg-AR" name="attr_Right_Leg_AR" type="text">AR<br>
                                    <input class="sheet-item sheet-Right-Leg-Lb" name="attr_Right_Leg_Lb"
                                           type="text">Lb(s)<br>
                                    <input class="sheet-item sheet-Right-Leg-Type" name="attr_Right_Leg_Type"
                                           type="text">Type<br>
                                </div>
                            </div>
                        </div><!-- armor and wounds -->
                    </div> <!-- left outer col -->
                    <!-- right outer col -->
                    <div class="sheet-col sheet-right-outer">
                        <h2>Skills & Specializations</h2>
                        <table>
                            <tr>
                                <th><h3>Skill/Spec.</h3></th>
                                <th><h3>Rank</h3></th>
                                <th><h3>Bonus</h3></th>
                                <th><h3>Base TN</h3></th>
                                <th><h3>Roll</h3></th>
                            </tr>
                            <tr>
                                <td>Acrobatics</td>
                                <td><select name="attr_Acrobatics_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Acrobatics_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Acrobatics_Base_TN" type="text"></td>
                                <td>
                                    <button name="roll_AcrobaticsRoll" type="roll"
                                            value="&{template:test} {{rollname=^{Roll Acrobatics}}} {{roll=[[((@{Acrobatics_Rank} + ?{Which stat do you want to use?|Strength,@{strength}|Agility,@{agility}} + ?{Modifier|0}) - 1d100cs<@{Luck_P_Max}cf>@{Luck_Fail}) / 10]]}} {{target=[[@{Acrobatics_Rank} + ?{Which stat do you want to use?|Strength,@{strength}|Agility,@{agility}} + ?{Modifier|0}]]}}"></button>
                                </td>
                            </tr>
                            <tr>
                                <td>Alchemy</td>
                                <td><select name="attr_Alchemy_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Alchemy_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Alchemy_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Alteration</td>
                                <td><select name="attr_Alteration_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Alteration_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Alteration_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Athletics</td>
                                <td><select name="attr_Athletics_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Athletics_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Athletics_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Command</td>
                                <td><select name="attr_Command_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Command_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Command_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Commerce</td>
                                <td><select name="attr_Commerce_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Commerce_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Commerce_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Conjuration</td>
                                <td><select name="attr_Conjuration_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Conjuration_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Conjuration_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Deceive</td>
                                <td><select name="attr_Deceive_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Deceive_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Deceive_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Destruction</td>
                                <td><select name="attr_Destruction_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Destruction_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Destruction_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Enchant</td>
                                <td><select name="attr_Enchant_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Enchant_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Enchant_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Evade</td>
                                <td><select name="attr_Evade_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Evade_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Evade_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Illusion</td>
                                <td><select name="attr_Illusion_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Illusion_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Illusion_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Investigate</td>
                                <td><select name="attr_Investigate_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Investigate_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Investigate_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Logic</td>
                                <td><select name="attr_Logic_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Logic_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Logic_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Lore</td>
                                <td><select name="attr_Lore_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Lore_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Lore_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Mysticism</td>
                                <td><select name="attr_Mysticism_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Mysticism_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Mysticism_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Navigate</td>
                                <td><select name="attr_Navigate_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Navigate_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Navigate_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Necromancy</td>
                                <td><select name="attr_Necromancy_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Necromancy_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Necromancy_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Observe</td>
                                <td><select name="attr_Observe_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Observe_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Observe_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Persuade</td>
                                <td><select name="attr_Persuade_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Persuade_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Persuade_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td><input class="sheet-item" name="attr_Profession1" placeholder="Profession"
                                           type="text"></td>
                                <td><select name="attr_Profession1_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Profession1_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Profession1_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td><input class="sheet-item" name="attr_Profession2" placeholder="Profession"
                                           type="text"></td>
                                <td><select name="attr_Profession2_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Profession2_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Profession2_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td><input class="sheet-item" name="attr_Profession3" placeholder="Profession"
                                           type="text"></td>
                                <td><select name="attr_Profession3_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Profession3_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Profession3_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Restoration</td>
                                <td><select name="attr_Restoration_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Restoration_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Restoration_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Ride</td>
                                <td><select name="attr_Ride_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Ride_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Ride_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Shehai Shen She Ru</td>
                                <td><select name="attr_Shehai_Shen_She_Ru_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Shehai_Shen_She_Ru_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Shehai_Shen_She_Ru_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Stealth</td>
                                <td><select name="attr_Stealth_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Stealth_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Stealth_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Subterfuge</td>
                                <td><select name="attr_Subterfuge_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Subterfuge_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Subterfuge_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Survival</td>
                                <td><select name="attr_Survival_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Survival_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Survival_Base_TN" type="text"></td>
                            </tr>
                            <tr>
                                <td>Th'uum</td>
                                <td><select name="attr_Thuum_Rank">
                                    <option value="-20">Untrained</option>
                                    <option value="0">Novice</option>
                                    <option value="10">Apprentice</option>
                                    <option value="20">Journeyman</option>
                                    <option value="30">Adept</option>
                                    <option value="40">Expert</option>
                                    <option value="50">Master</option>
                                </select></td>
                                <td><input class="sheet-item" name="attr_Thuum_Bonus" type="text"></td>
                                <td><input class="sheet-item" name="attr_Thuum_Base_TN" type="text"></td>
                            </tr>
                        </table>
                    </div> <!-- right outer col -->
                </div> <!-- outer 2colrow -->
            </div> <!-- tab 1 -->
            <div class="sheet-tab-content sheet-tab2">
                consectetur adipiscing elithdfgxdghfhgdfxhxdg
            </div><!-- tab 2 -->
            <div class="sheet-tab-content sheet-tab3">
                consectetdsagdfgsgdfsgshftdghjdgtyfhdtgjdtyjtdy xhxdg
            </div><!-- tab 3 -->
            <div class="sheet-tab-content sheet-tab4">
                consectetur adipiscssdgdfsghshgerthing elisthdsrthrtshrthtrdhrdthdrthrhdrtthdfgxdghfhgdfxhxdg
            </div><!-- tab 4 -->
        </div>

    </div> <!-- wrapper -->
</div> <!-- characteristics aka sheet end -->

<!--Roll Template test-->
<rolltemplate class="sheet-rolltemplate-test">
    <table>
        <tr><th>{{rollname}}</th></tr>
        <td><img src="http://i.imgur.com/g1SVcwZ.png" height="100%" width="auto" max-width="100px"></td>
        {{#target}}
        <tr>
            <td><span class="tcat">Target: </span>{{target}}</td></tr>
        {{/target}}
        {{#rollGreater() roll 0}}
        <tr>
            <td><span class="tcat">Success: </span>{{roll}} <span>degree of success</span></td>
        </tr>
        {{/rollGreater() roll 0}}
        {{#rollLess() roll 0}}
        <tr>
            <td><span class="tcat">Failure: </span>{{roll}} <span>degree of failure</span></td>
        </tr>
        {{/rollLess() roll 0}}
        {{#rollWasCrit() roll}}
        <tr>
            <td><span class="tcat">That's a crit!! </span></td>
        </tr>
        {{/rollWasCrit() roll}}
        {{#rollWasFumble() roll}}
        <tr>
            <td><span class="tcat">Yikes, that's a critical fail... </span></td>
        </tr>
        {{/rollWasFumble() roll}}
    </table>
</rolltemplate>